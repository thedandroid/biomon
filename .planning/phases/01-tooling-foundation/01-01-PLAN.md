---
phase: 01-tooling-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - tsconfig.json
autonomous: true

must_haves:
  truths:
    - "npm run typecheck runs without errors"
    - "npm run dev starts server using tsx watch"
    - "npm run build includes type-check before bundling"
    - "All existing tests pass unchanged"
  artifacts:
    - path: "tsconfig.json"
      provides: "TypeScript configuration with strict mode"
      contains: '"strict": true'
    - path: "package.json"
      provides: "Updated scripts and TypeScript dependencies"
      contains: '"typecheck"'
  key_links:
    - from: "package.json"
      to: "tsconfig.json"
      via: "tsc --noEmit reads tsconfig"
      pattern: "tsc.*--noEmit"
    - from: "package.json"
      to: "server.js"
      via: "tsx watch executes server"
      pattern: "tsx.*watch.*server"
---

<objective>
Install TypeScript tooling and configure tsconfig.json with strict mode for the BIOMON project.

Purpose: Establish the foundation for TypeScript development without converting any source files. This enables type-checking infrastructure that later phases will use.

Output: Working tsconfig.json, TypeScript dependencies installed, package.json scripts updated for dev/build/typecheck workflows.
</objective>

<execution_context>
@/Users/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-tooling-foundation/01-RESEARCH.md
@package.json
@eslint.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install TypeScript dependencies</name>
  <files>package.json, package-lock.json</files>
  <action>
Install TypeScript tooling as dev dependencies:

```bash
npm install -D typescript tsx @types/node typescript-eslint
```

Expected versions (per RESEARCH.md):
- typescript ^5.9.3
- tsx ^4.21.0
- @types/node ^25.0.10
- typescript-eslint ^8.54.0

Do NOT remove nodemon yet - it will be replaced in the scripts task.
  </action>
  <verify>Run `npm ls typescript tsx @types/node typescript-eslint` - all four packages listed with versions</verify>
  <done>TypeScript dependencies installed and visible in package.json devDependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create tsconfig.json</name>
  <files>tsconfig.json</files>
  <action>
Create tsconfig.json in project root with these settings (per RESEARCH.md):

```json
{
  "compilerOptions": {
    "strict": true,
    "noEmit": true,
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "target": "ES2022",
    "lib": ["ES2022"],
    "esModuleInterop": true,
    "isolatedModules": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "allowJs": true,
    "checkJs": false,
    "declaration": true,
    "declarationDir": "./dist/types"
  },
  "include": ["src/**/*", "*.js", "*.ts"],
  "exclude": ["node_modules", "dist", "coverage", "public"]
}
```

Key decisions from CONTEXT.md:
- `strict: true` - full strict mode from day one
- `moduleResolution: "Bundler"` - optimal for esbuild (no .js extension requirement)
- `allowJs: true, checkJs: false` - allows JS files during transition but doesn't type-check them
- `noEmit: true` - tsc for type-checking only, esbuild handles transpilation
- Include root-level .js and .ts files since source files aren't in src/ yet

Note: src/ directory doesn't exist yet. The include pattern will just match nothing for src/**/* until files are created in later phases.
  </action>
  <verify>Run `npx tsc --noEmit` - should complete with no errors (allowJs=true, checkJs=false means JS files are allowed but not type-checked)</verify>
  <done>tsconfig.json exists with strict mode, Bundler resolution, and allowJs for transition period</done>
</task>

<task type="auto">
  <name>Task 3: Update package.json scripts</name>
  <files>package.json</files>
  <action>
Update package.json scripts section:

```json
{
  "scripts": {
    "start": "node server.js",
    "dev": "tsx watch server.js",
    "typecheck": "tsc --noEmit",
    "selfcheck": "node scripts/selfcheck.js",
    "test": "vitest run",
    "test:watch": "vitest --watch",
    "test:coverage": "vitest --coverage",
    "test:ui": "vitest --ui",
    "build": "npm run typecheck && node build.js && pkg dist/server.bundled.cjs --targets node18-win-x64 --output dist/biomon",
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "prepare": "husky"
  }
}
```

Changes from current:
- `dev`: Replace `nodemon server.js` with `tsx watch server.js` (tsx handles both .js and .ts transparently)
- `typecheck`: New script - runs `tsc --noEmit` for explicit type-checking
- `build`: Add `npm run typecheck &&` prefix to run type-check before bundling

Keep nodemon in devDependencies for now (can be removed later as cleanup).
  </action>
  <verify>
Run these commands in sequence:
1. `npm run typecheck` - should complete without errors
2. `npm run dev` - should start server (Ctrl+C to stop after confirming startup)
3. `npm run build` - should produce dist/biomon executable
4. `npm test` - all existing tests should pass
  </verify>
  <done>Scripts updated: dev uses tsx watch, typecheck command exists, build includes type-check</done>
</task>

</tasks>

<verification>
After all tasks complete, verify the phase success criteria:

1. **Typecheck works:** `npm run typecheck` completes without errors
2. **Dev server works:** `npm run dev` starts server with tsx watch
3. **Build works:** `npm run build` produces working executable in dist/
4. **Tests pass:** `npm test` - all existing tests pass (no changes to test files)
</verification>

<success_criteria>
- [ ] typescript, tsx, @types/node, typescript-eslint in devDependencies
- [ ] tsconfig.json exists with strict: true
- [ ] npm run typecheck runs successfully
- [ ] npm run dev starts server with tsx
- [ ] npm run build produces executable
- [ ] npm test passes (all existing tests)
</success_criteria>

<output>
After completion, create `.planning/phases/01-tooling-foundation/01-01-SUMMARY.md`
</output>
